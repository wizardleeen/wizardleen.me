---
import BaseLayout from '../../layouts/BaseLayout.astro';
import { getCollection } from 'astro:content';

const posts = (await getCollection('blog')).sort(
  (a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf()
);
---

<BaseLayout title="全部文章 - 李洋的博客">
  <section class="blog-listing">
    <h1>全部文章</h1>
    <ul class="post-list">
      {posts.map((post) => (
        <li>
          <a href={`/blog/${post.id}`}>
            <h3>{post.data.title}</h3>
            <p class="post-meta">
              <time datetime={post.data.pubDate.toISOString()}>
                {post.data.pubDate.toLocaleDateString('zh-CN', { year: 'numeric', month: 'long', day: 'numeric' })}
              </time>
            </p>
            <p class="post-description">{post.data.description}</p>
          </a>
        </li>
      ))}
    </ul>
  </section>
</BaseLayout>
